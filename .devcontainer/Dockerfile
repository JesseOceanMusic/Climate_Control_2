# Используем базовый образ Ubuntu. Он достаточно легковесный и содержит все необходимое.
FROM ubuntu:latest

# Устанавливаем переменные окружения для локали и кодировки.
# Это помогает избежать проблем с отображением символов и поведением некоторых программ.
ENV LC_ALL=C.UTF-8
ENV LANG=C.UTF-8

# Обновляем список пакетов и устанавливаем необходимые инструменты для сборки:
# build-essential включает gcc, g++, make и другие утилиты.
# cmake...
# gbd - отладчик
# lcov - отчеты по покрытию тестами
# git контроль версий
# rm -rf /var/lib/apt/lists/* очищает кэш пакетов после установки, уменьшая размер образа.
RUN apt-get update && apt-get install -y \
    build-essential \
    cmake \
    gdb \
    lcov \
    git \
    && rm -rf /var/lib/apt/lists/*

# Устанавливаем рабочую директорию внутри контейнера.
# Все последующие команды (например, COPY или команды сборки) будут выполняться относительно этой директории.
WORKDIR /app

# Копируем ваш проект из хост-системы в рабочую директорию контейнера.
# . (первая) относится к контексту сборки (корню вашего проекта на хосте),
# . (вторая) относится к текущей рабочей директории внутри контейнера (/app).
COPY . .

# Команда по умолчанию, которая будет выполняться, если контейнер запущен без аргументов.
# В нашем случае она служит "заглушкой", так как мы будем переопределять команду запуска через VS Code.
CMD ["bash"]